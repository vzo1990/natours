{"mappings":"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","sources":["public/js/index.js","public/js/login.js","public/js/alert.js","public/js/account.js","public/js/logout.js","public/js/mapbox.js","public/js/bookTour.js"],"sourcesContent":["/* eslint-disable */\nimport { login } from './login';\nimport { updateUserData, updateUserPassword } from './account';\nimport { logout } from './logout';\nimport { displayMap } from './mapbox';\nimport { bookTour } from './bookTour';\n\nconst mapBoxEl = document.getElementById('map');\nconst loginForm = document.querySelector('.login-form .form');\nconst userDataForm = document.querySelector('.form-user-data');\nconst userPasswordForm = document.querySelector('.form-user-settings');\nconst logoutBtn = document.querySelector('.nav__el--logout');\nconst bookTourBtn = document.getElementById('book-tour');\n\nif (mapBoxEl) {\n  const locations = JSON.parse(\n    document.getElementById('map').dataset.locations,\n  );\n\n  if (locations.length > 0) displayMap(locations);\n}\n\nif (loginForm)\n  loginForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n\n    login(email, password);\n  });\n\nif (logoutBtn)\n  logoutBtn.addEventListener('click', () => {\n    logout();\n  });\n\nif (userDataForm)\n  userDataForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const form = new FormData();\n\n    form.append('email', document.getElementById('email').value);\n    form.append('name', document.getElementById('name').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n\n    updateUserData(form);\n  });\n\nif (userPasswordForm)\n  userPasswordForm.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const currentPassword = document.getElementById('password-current').value;\n    const newPassword = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n\n    updateUserPassword(currentPassword, newPassword, passwordConfirm);\n  });\n\nif (bookTourBtn)\n  bookTourBtn.addEventListener('click', (e) => {\n    e.preventDefault();\n\n    const tourId = e.target.dataset.tourId;\n    bookTour(tourId);\n  });\n","/* eslint-disable */\nimport { showAlert } from './alert';\n\nexport const login = async (email, password) => {\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: 'http://127.0.0.1:3000/api/v1/users/login',\n      data: { email, password },\n    });\n\n    if (res.data.status === 'success') {\n      showAlert('success', 'Logged in successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (e) {\n    showAlert('error', e.response.data.message);\n  }\n};\n","/* eslint-disable */\r\nexport const showAlert = (type, msg) => {\r\n  closeAlert();\r\n\r\n  const markup = `<div class=\"alert alert--${type}\"> ${msg} </div>`;\r\n\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n\r\n  window.setTimeout(() => {\r\n    closeAlert();\r\n  }, 3000);\r\n};\r\n\r\nexport const closeAlert = () => {\r\n  const alert = document.querySelector('.alert');\r\n  if (alert) alert.parentElement.removeChild(alert);\r\n};\r\n","/* eslint-disable */\r\nimport { showAlert } from './alert';\r\n\r\nexport const updateUserData = async (form) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url: 'http://127.0.0.1:3000/api/v1/users/update-user',\r\n      data: form,\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Account updated successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/account');\r\n      }, 1500);\r\n    }\r\n  } catch (e) {\r\n    showAlert('error', e.response.data.message);\r\n  }\r\n};\r\n\r\nexport const updateUserPassword = async (\r\n  currentPassword,\r\n  password,\r\n  passwordConfirm,\r\n) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url: 'http://127.0.0.1:3000/api/v1/users/update-password',\r\n      data: {\r\n        currentPassword,\r\n        password,\r\n        passwordConfirm,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Password updated successfully!');\r\n    }\r\n  } catch (e) {\r\n    showAlert('error', e.response.data.message);\r\n  }\r\n};\r\n","/* eslint-disable */\nimport { showAlert } from './alert';\n\nexport const logout = async () => {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: 'http://127.0.0.1:3000/api/v1/users/logout',\n    });\n\n    if (res.data.status === 'success') {\n      showAlert('success', 'Logged out successfully!');\n      window.setTimeout(() => {\n        location.replace('/');\n      }, 1500);\n    }\n  } catch (e) {\n    showAlert('error', e.response.data.message);\n  }\n};\n","/* eslint-disable */\nexport const displayMap = (locations) => {\n  mapboxgl.accessToken =\n    'pk.eyJ1IjoidnpvcmljaGV2IiwiYSI6ImNsbG1lMWNrajFnaWYzZmx3bG9xNHVsOWYifQ.-38bFnQcqiHBFWJIZ3PmBg';\n  const map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/vzorichev/cllmef6pl02i401mfhq5c1ao8',\n    interactive: false,\n  });\n\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach((location) => {\n    const pin = document.createElement('div');\n    pin.className = 'marker';\n\n    new mapboxgl.Marker({\n      element: pin,\n      anchor: 'bottom',\n    })\n      .setLngLat(location.coordinates)\n      .addTo(map);\n\n    new mapboxgl.Popup({ offset: 30 })\n      .setLngLat(location.coordinates)\n      .setHTML(`<p>Day ${location.day}: ${location.description}</p>`)\n      .setMaxWidth('300px')\n      .addTo(map);\n\n    bounds.extend(location.coordinates);\n  });\n\n  map.fitBounds(bounds, { padding: 150 });\n};\n","/* eslint-disable */\r\nimport { showAlert } from './alert';\r\n\r\nexport const bookTour = async (id) => {\r\n  try {\r\n    const res = await axios(\r\n      `http://127.0.0.1:3000/api/v1/booking/checkout-session/${id}`,\r\n    );\r\n\r\n    location.assign(res.data.stripeSession.url);\r\n  } catch (e) {\r\n    showAlert('error', e.response.data.message);\r\n  }\r\n};\r\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../"}